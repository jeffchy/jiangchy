---
title: 'Django Project: Simple Gallery(一)'
date: 2017-01-26 20:42:36
tags:
- Web
- python
- Django
categories:
- Tech
- Note
---
今天继续唠唠Django，我果然是耐不住手痒的人。一直都有写一个Webapp的美好愿望，之前零零碎碎学了一些django的web框架知识，总得想办法用一用，于是我花了大概三天，断断续续终于把所有的框架以及前端搭好了(虽然还有很多不完美的地方)。就差在自己的阿里云ECS上部署完成了,部署对我来说绝对是一个很大的难题，作为之前完全没有接触过后端的小白，光是在服务器上配置好LNMP的环境就废了我不少功夫，如何在阿里云ECS上部署Django，网上有很多教程，但是随着一些软件的更新，基本上是没有办法直接用了，所以我觉得还是得真正弄懂这些软件背后的原理(nginx,supervisor,Gunicorn),为啥要反向代理，WSGI server又是个啥，这些玩意都得上官网弄得基本明白才能配置成功，之后我还要在这方面努力一下...后话不多说，这一系列主要介绍一下我这个webapp,并且借此小小说明一下django的一些环节的工作流。
<!-- more -->
### PART I SIMPLE GALLERY WEBAPP
# 声明
首先这只是一个demo,不仅没有部署过，而且还在各方面有一些缺陷，所以暂时是不适合直接运用于生产环境的。具体的一些缺陷你可以在github源码中的README.MD中看到一部分。我去...我刚刚push上去，差点忘记把我的sql文件删了...还好我想起来了...好，上[源码](https://github.com/jeffchy/gallery)，欢迎clone欢迎fork欢迎star欢迎watch（我在做梦吗）
# 为啥要用Django？
一个gallery，肯定要管理照片，如果按照年月分类的话，那么每年每月就是一个url，每新增一个照片，又是一个新的url，你说我如果不停的用静态页面写会不会累到虚脱？所以这个时候web框架的作用就体现出来了，它可以管理各种请求，并且分发到合适的视图中间去，同时根据请求调用不同的模板生成出不同的html并且response给浏览者。我一共才写了5个html模板，然而可以放好多张图片。

# 主要有哪些功能？长什么样子？
这是一个gallery，其实就是存照片，管理照片的，根据年月将照片分类。下面是首页的样子。首页包括一个nav导航和一个list，list列出了每年每月照片的数量，并且可以跳转至每年每月的照片子页面。
![](/images/image/20170126/index.png)

nav导航中包括了一个Homepage链接，一个upload image的链接，一个Date Index的dropbox，通过它可以跳转至指定年月的照片，和下面的list功能相同，但是由于导航每个子页面都有，所以极大的方便了照片的查看。如下图：
![](/images/image/20170126/index2.png)

通过这些链接你可以进入每年每月照片的子分类，子页面。
![](/images/image/20170126/viewimg.png)

点击每张照片，你会看见照片的年月信息，照片的一个简短的描述，如下图。
![](/images/image/20170126/detail.png)

既然是一个gallery，那照片怎么来的呢？就是之前的upload image链接了，点进去如下图：
![](/images/image/20170126/upload.png)

我用了七牛云存储作为图床存储图片，他还有免费的cdn加速。这里的select files调用了七牛sdk中的上传api，选了图片并且确定之后会将图片上传，会生成一个url，接下来你需要完善每个图片的信息，当你将鼠标对焦到url表单的时候，表单会自动填充为url，省去了用户填写的麻烦，下面的表单分别是日期和描述，用户需要完善这些信息才行，最终submit提交数据库，具体如图。
![](/images/image/20170126/upload2.png)

当然你如果想要真正看见照片，传照片，你首先要进行用户登录，未登录时的所有操作都会跳转到Login链接，就是这样，用户名和密码是我随便编的，登录之后就可以进行所有操作啦，同样logout会将你退出登录。
![](/images/image/20170126/login.png)

终于有点webapp的感觉啦哈哈，个人还是比较满意的，主要是体验了一下用框架建构大型网站的过程，对整体的思维很有帮助，自觉做的不错，学到不少东西，顺便bootstrap真好用。下一篇会分享一下django相关的技术细节吧。
对了如果有人问我为啥有登陆没有注册？啊因为这本来就是两个人用的嘛。我知道密码就好了嘛，笑。

